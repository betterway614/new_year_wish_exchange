<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Êñ∞Êò•ÊÇ¶Êç¢ - Êî∂Âà∞Á•ùÁ¶è</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/vant/lib/index.css"/>
    <script src="https://unpkg.com/vant/lib/vant.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet">

    <style>
        /* ÂÖ®Â±ÄÂü∫Á°ÄÊ†∑Âºè */
        body {
            background: radial-gradient(ellipse at center, #2c0b0e 0%, #0f0204 100%);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            overflow: hidden;
        }
        
        .font-brush { font-family: 'Ma Shan Zheng', cursive; }
        .font-elegant { font-family: 'ZCOOL XiaoWei', serif; }

        /* Á∫πÁêÜÂ±Ç */
        .pattern-overlay {
            position: fixed;
            inset: 0;
            background-image: 
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23f8e5c0' fill-opacity='0.03'%3E%3Cpath d='M30 0L60 30L30 60L0 30z'/%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 1;
        }

        /* Canvas ËÉåÊôØ */
        #bg-canvas {
            position: fixed;
            inset: 0;
            z-index: 0;
        }

        /* ‰∏ªÈ¢òÊ†∑ÂºèÁ≥ªÁªü (‰∏éÂèëÈÄÅÁ´Ø‰øùÊåÅ‰∏ÄËá¥) */
        /* ‰∏ªÈ¢ò1: È∏øËøê (Red) */
        .theme-red .card-body { 
            background: linear-gradient(135deg, #ffcdd2 0%, #ffebee 100%); 
            color: #b71c1c; 
            border: 3px solid #d32f2f; 
            box-shadow: 0 20px 40px -10px rgba(211, 47, 47, 0.4);
        }
        .theme-red .card-icon { background: linear-gradient(135deg, #d32f2f, #b71c1c); color: #fff; }
        .theme-red .card-seal { background-color: #d32f2f; color: #fff; border-color: #f8e5c0; }

        /* ‰∏ªÈ¢ò2: ÈáëÁéâ (Gold) */
        .theme-gold .card-body { 
            background: linear-gradient(135deg, #fff9c4 0%, #fffde7 100%); 
            color: #f57f17; 
            border: 3px solid #fbc02d; 
            box-shadow: 0 20px 40px -10px rgba(251, 192, 45, 0.4);
        }
        .theme-gold .card-icon { background: linear-gradient(135deg, #fbc02d, #f9a825); color: #fff; }
        .theme-gold .card-seal { background-color: #fbc02d; color: #fff; border-color: #5d4037; }

        /* ‰∏ªÈ¢ò3: Ê∞¥Â¢® (Ink) */
        .theme-ink .card-body { 
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%); 
            color: #424242; 
            border: 3px solid #616161; 
            box-shadow: 0 20px 40px -10px rgba(97, 97, 97, 0.4);
        }
        .theme-ink .card-icon { background: linear-gradient(135deg, #616161, #424242); color: #fff; }
        .theme-ink .card-seal { background-color: #616161; color: #fff; border-color: #f8e5c0; }

        /* ‰ø°Â∞ÅÊ†∑Âºè */
        .envelope-container {
            perspective: 1000px;
            position: relative;
        }

        .envelope {
            position: relative;
            width: 280px;
            height: 200px;
            background: linear-gradient(135deg, #b71c1c 0%, #d32f2f 100%);
            border-radius: 12px;
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.5),
                0 0 60px rgba(211, 47, 47, 0.3),
                inset 0 0 30px rgba(255, 255, 255, 0.1);
            transform-style: preserve-3d;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .envelope::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 0L20 10L10 20L0 10Z' fill='%23f8e5c0' fill-opacity='0.1'/%3E%3C/svg%3E");
            border-radius: 12px;
            pointer-events: none;
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(135deg, #c62828 0%, #e53935 100%);
            border-radius: 12px 12px 0 0;
            transform-origin: top;
            transform: rotateX(0deg);
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 2;
        }

        .envelope-flap::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 0L20 10L10 20L0 10Z' fill='%23f8e5c0' fill-opacity='0.15'/%3E%3C/svg%3E");
        }

        .envelope:hover {
            transform: scale(1.05);
            box-shadow: 
                0 30px 60px -12px rgba(0, 0, 0, 0.6),
                0 0 80px rgba(211, 47, 47, 0.4);
        }

        .envelope:hover .envelope-flap {
            transform: rotateX(-30deg);
        }

        /* ‰ø°Â∞ÅÂÜÖÂÆπ */
        .envelope-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .envelope-icon {
            font-size: 3rem;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Â∞ÅÊ≥•Âç∞Á´† */
        .seal-stamp {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle, #fbc02d, #f9a825);
            border: 3px solid #f8e5c0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
            50% { box-shadow: 0 4px 20px rgba(251, 192, 45, 0.6); }
        }

        .seal-text {
            font-family: 'Ma Shan Zheng', cursive;
            color: #b71c1c;
            font-size: 1.2rem;
            transform: rotate(-15deg);
        }

        /* Âç°ÁâáÂ±ïÁ§∫Ê†∑Âºè */
        .card-container {
            perspective: 1000px;
        }

        .greeting-card {
            position: relative;
            transform-style: preserve-3d;
            animation: card-appear 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes card-appear {
            0% { 
                opacity: 0;
                transform: scale(0.5) translateY(100px) rotateX(-20deg);
            }
            100% { 
                opacity: 1;
                transform: scale(1) translateY(0) rotateX(0deg);
            }
        }

        .card-body {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            backdrop-filter: blur(8px);
        }

        .card-decoration {
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000' fill-opacity='0.03'%3E%3Cpath d='M20 0L40 20L20 40L0 20Z'/%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
        }

        /* Âç°ÁâáË£ÖÈ•∞ÂÖÉÁ¥† */
        .corner-decoration {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px dashed currentColor;
            opacity: 0.3;
        }

        .corner-tl { top: 8px; left: 8px; border-right: none; border-bottom: none; }
        .corner-tr { top: 8px; right: 8px; border-left: none; border-bottom: none; }
        .corner-bl { bottom: 8px; left: 8px; border-right: none; border-top: none; }
        .corner-br { bottom: 8px; right: 8px; border-left: none; border-top: none; }

        /* Âä®ÁîªËøáÊ∏° */
        .fade-enter-active,
        .fade-leave-active { transition: opacity 0.5s ease; }
        .fade-enter-from,
        .fade-leave-to { opacity: 0; }

        /* Á≤íÂ≠êÊïàÊûú */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            pointer-events: none;
            animation: rise 3s ease-in-out infinite;
        }

        @keyframes rise {
            0% { 
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% { 
                transform: translateY(-100vh) scale(0);
                opacity: 0;
            }
        }

        /* ÊåâÈíÆÊ†∑Âºè */
        .btn-home {
            background: linear-gradient(135deg, #d32f2f, #b71c1c);
            border: none;
            box-shadow: 0 10px 20px -5px rgba(211, 47, 47, 0.4);
            transition: all 0.3s ease;
        }

        .btn-home:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px -5px rgba(211, 47, 47, 0.5);
        }

        .btn-home:active {
            transform: translateY(0);
        }

        /* ‰∫ëÁ∫πË£ÖÈ•∞ */
        .cloud-pattern {
            position: absolute;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cpath fill='%23f8e5c0' fill-opacity='0.05' d='M50 10c15 0 25 15 25 30s-10 25-25 25-25-15-25-30 10-25 25-30z'/%3E%3C/svg%3E");
            background-size: 200px 200px;
            animation: drift 20s linear infinite;
            pointer-events: none;
        }

        @keyframes drift {
            0% { background-position: 0 0; }
            100% { background-position: 200px 200px; }
        }
    </style>
</head>
<body class="min-h-screen relative">
    <!-- Canvas ËÉåÊôØ -->
    <canvas id="bg-canvas"></canvas>
    
    <!-- Á∫πÁêÜÂ±Ç -->
    <div class="pattern-overlay"></div>

    <div id="app" class="h-screen w-full flex flex-col items-center justify-center overflow-hidden relative z-10">
        
        <!-- ‰ø°Â∞ÅÈò∂ÊÆµ -->
        <transition name="fade">
            <div v-if="!isOpen" class="envelope-container flex flex-col items-center gap-6">
                
                <div class="envelope" @click="openCard">
                    <div class="envelope-flap"></div>
                    <div class="envelope-content">
                        <span class="envelope-icon">üßß</span>
                    </div>
                    <div class="seal-stamp">
                        <span class="seal-text">Á¶è</span>
                    </div>
                </div>

                <div class="text-center space-y-2">
                    <div class="bg-black/30 backdrop-blur-sm px-6 py-3 rounded-full border border-red-500/30">
                        <p class="text-yellow-200 font-brush text-xl tracking-wider">
                            Êù•Ëá™ {{ matchedData.nickname }}
                        </p>
                    </div>
                    <p class="text-white/60 text-sm flex items-center gap-2 justify-center">
                        <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                        ÁÇπÂáªÊãÜÂºÄÁ•ùÁ¶è
                    </p>
                </div>
            </div>
        </transition>

        <!-- Âç°ÁâáÂ±ïÁ§∫Èò∂ÊÆµ -->
        <transition name="fade">
            <div v-if="isOpen" class="w-full max-w-sm px-4 card-container">
                
                <!-- Ë£ÖÈ•∞Á≤íÂ≠ê -->
                <div v-for="i in 15" :key="i" 
                     class="particle"
                     :style="{
                         left: Math.random() * 100 + '%',
                         top: Math.random() * 100 + '%',
                         backgroundColor: currentStyle.color,
                         animationDelay: Math.random() * 2 + 's',
                         animationDuration: (2 + Math.random() * 2) + 's'
                     }">
                </div>

                <div :class="currentStyle.cssClass" class="greeting-card rounded-2xl overflow-hidden shadow-2xl">
                    <div class="card-body p-6 md:p-8 min-h-[420px] flex flex-col relative">
                        <!-- Á∫πÁêÜË£ÖÈ•∞ -->
                        <div class="card-decoration"></div>
                        <div class="cloud-pattern"></div>
                        
                        <!-- ËßíËêΩË£ÖÈ•∞ -->
                        <div class="corner-decoration corner-tl"></div>
                        <div class="corner-decoration corner-tr"></div>
                        <div class="corner-decoration corner-bl"></div>
                        <div class="corner-decoration corner-br"></div>

                        <!-- Âç°ÁâáÂõæÊ†á -->
                        <div class="card-icon w-14 h-14 rounded-full flex items-center justify-center text-3xl absolute -top-5 -right-5 shadow-lg">
                            {{ currentStyle.icon }}
                        </div>

                        <!-- Âç°ÁâáÂÜÖÂÆπ -->
                        <div class="mt-4 relative z-10 flex-1 flex flex-col">
                            <div class="flex items-center gap-3 mb-4">
                                <span class="text-2xl">‚úâÔ∏è</span>
                                <h2 class="text-lg font-bold opacity-80 font-elegant">To: ÊúâÁºò‰∫∫</h2>
                            </div>
                            
                            <div class="w-full h-px bg-current opacity-20 my-3"></div>
                            
                            <p class="text-base leading-loose font-serif text-justify flex-1 min-h-[120px]">
                                {{ matchedData.content }}
                            </p>
                            
                            <div class="mt-6 text-right">
                                <p class="text-xs opacity-50 uppercase tracking-wider mb-1">From</p>
                                <div class="flex items-end justify-end gap-2">
                                    <p class="text-xl font-bold font-elegant">{{ matchedData.nickname }}</p>
                                    <div class="card-seal w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs font-bold">
                                        Á¶è
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Â∫ïÈÉ®Ë£ÖÈ•∞ -->
                        <div class="absolute bottom-0 left-0 w-full h-1.5 bg-current opacity-20"></div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®Êìç‰ΩúÂå∫ -->
                <div class="mt-8 space-y-4">
                    <div class="bg-black/30 backdrop-blur-sm rounded-xl p-4 border border-red-500/20">
                        <p class="text-center text-white/60 text-xs">
                            <span class="text-yellow-400">üí°</span> Êà™ÂõæÂ±èÂπïÂç≥ÂèØÊ∞∏‰πÖ‰øùÂ≠òËøô‰ªΩÁºòÂàÜ
                        </p>
                    </div>
                    
                    <button 
                        class="btn-home w-full py-4 rounded-xl text-white font-bold flex items-center justify-center gap-2 text-lg"
                        @click="goHome"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                        </svg>
                        ËøîÂõûÈ¶ñÈ°µ
                    </button>
                </div>
            </div>
        </transition>
    </div>

    <script>
        // --- Canvas Á≤íÂ≠êËÉåÊôØ ---
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * width;
                this.y = height + Math.random() * 150;
                this.speed = 0.3 + Math.random() * 2;
                this.size = 1.5 + Math.random() * 5;
                this.opacity = 0.1 + Math.random() * 0.5;
                this.type = Math.random() > 0.85 ? 'lantern' : 'coin';
                this.angle = Math.random() * Math.PI * 2;
                this.spin = (Math.random() - 0.5) * 0.03;
            }

            update() {
                this.y -= this.speed;
                this.angle += this.spin;
                this.x += Math.sin(this.angle * 2) * 0.8;

                if (this.y < -60) this.reset();
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.opacity;
                ctx.translate(this.x, this.y);
                ctx.rotate(this.angle);

                if (this.type === 'coin') {
                    const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.size);
                    gradient.addColorStop(0, '#FFF59D');
                    gradient.addColorStop(0.5, '#FFD700');
                    gradient.addColorStop(1, '#FF8F00');
                    
                    ctx.beginPath();
                    ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                    ctx.fillStyle = gradient;
                    ctx.shadowBlur = 15 + this.size * 3;
                    ctx.shadowColor = 'rgba(255, 215, 0, 0.6)';
                    ctx.fill();

                    ctx.beginPath();
                    ctx.arc(0, 0, this.size * 0.7, 0, Math.PI * 2);
                    ctx.strokeStyle = 'rgba(255, 243, 224, 0.8)';
                    ctx.lineWidth = this.size * 0.15;
                    ctx.stroke();
                } else {
                    const glowGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.size * 3);
                    glowGradient.addColorStop(0, 'rgba(255, 69, 0, 0.4)');
                    glowGradient.addColorStop(1, 'transparent');
                    ctx.fillStyle = glowGradient;
                    ctx.beginPath();
                    ctx.arc(0, 0, this.size * 3, 0, Math.PI * 2);
                    ctx.fill();

                    const bodyGradient = ctx.createLinearGradient(-this.size, 0, this.size, 0);
                    bodyGradient.addColorStop(0, '#D32F2F');
                    bodyGradient.addColorStop(0.5, '#FF5252');
                    bodyGradient.addColorStop(1, '#B71C1C');
                    
                    ctx.fillStyle = bodyGradient;
                    ctx.shadowBlur = 20;
                    ctx.shadowColor = '#FF6B6B';
                    ctx.beginPath();
                    ctx.ellipse(0, 0, this.size * 2.2, this.size * 1.8, 0, 0, Math.PI * 2);
                    ctx.fill();

                    ctx.strokeStyle = 'rgba(255, 215, 0, 0.6)';
                    ctx.lineWidth = this.size * 0.1;
                    for (let i = -2; i <= 2; i++) {
                        ctx.beginPath();
                        ctx.moveTo(i * this.size * 0.8, -this.size * 1.5);
                        ctx.quadraticCurveTo(i * this.size * 0.9, 0, i * this.size * 0.8, this.size * 1.5);
                        ctx.stroke();
                    }

                    const coreGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.size * 0.6);
                    coreGradient.addColorStop(0, '#FFD700');
                    coreGradient.addColorStop(0.6, '#FF8F00');
                    coreGradient.addColorStop(1, 'transparent');
                    ctx.fillStyle = coreGradient;
                    ctx.beginPath();
                    ctx.arc(0, 0, this.size * 0.6, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.restore();
            }
        }

        function initParticles() {
            for(let i = 0; i < 80; i++) {
                particles.push(new Particle());
            }
        }

        function animate() {
            ctx.clearRect(0, 0, width, height);
            
            const bgGradient = ctx.createLinearGradient(0, 0, 0, height);
            bgGradient.addColorStop(0, '#2c0b0e');
            bgGradient.addColorStop(0.5, '#1a0507');
            bgGradient.addColorStop(1, '#0f0204');
            ctx.fillStyle = bgGradient;
            ctx.fillRect(0, 0, width, height);

            particles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animate);
        }

        initParticles();
        animate();

        // --- Vue Â∫îÁî® ---
        const { createApp, ref, computed } = Vue;
        
        const STYLES = {
            0: { cssClass: 'theme-red', icon: 'üèÆ', color: '#d32f2f' },
            1: { cssClass: 'theme-gold', icon: 'üí∞', color: '#fbc02d' },
            2: { cssClass: 'theme-ink', icon: 'üèîÔ∏è', color: '#616161' }
        };

        const app = createApp({
            setup() {
                const isOpen = ref(false);
                
                const matchedData = ref({
                    nickname: "ËøêÁª¥ÁªÑ-Â§ßÂç´",
                    content: "Á•ù‰Ω†Âú®Êñ∞ÁöÑ‰∏ÄÂπ¥ÈáåÔºåÊúçÂä°Âô®Ê∞∏‰∏çÂÆïÊú∫Ôºå‰ª£Á†Å‰∏ÄÊ¨°Ë∑ëÈÄöÔºåÂèëÈôÖÁ∫ø‰æùÁÑ∂ÂùöÊå∫ÔºÅÊñ∞Âπ¥Âø´‰πêÔºÅ",
                    style_id: 1
                });

                const currentStyle = computed(() => {
                    return STYLES[matchedData.value.style_id] || STYLES[0];
                });

                const openCard = () => {
                    isOpen.value = true;
                    // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†Èü≥Êïà
                };

                const goHome = () => {
                    window.location.href = 'index.html';
                };

                return { 
                    isOpen, 
                    matchedData, 
                    currentStyle, 
                    openCard, 
                    goHome 
                };
            }
        });
        app.use(vant);
        app.mount('#app');
    </script>
</body>
</html>
