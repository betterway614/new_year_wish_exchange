<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新年发射祝福台 - 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.prod.min.js"></script>
    
    <style>
        /* --- 1. 全局重置 --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            /* 深邃的夜空红渐变背景 */
            background: radial-gradient(circle at center, #2a001a 0%, #0d0015 60%, #000000 100%);
            overflow: hidden;
            font-family: "Microsoft YaHei", "Heiti SC", "SimHei", sans-serif; /* 优先使用黑体/微软雅黑，更粗壮 */
        }

        #app {
            position: relative;
            width: 100vw;
            height: 100vh;
            perspective: 1200px;
            overflow: hidden;
        }

        /* --- 2. 背景层 (Canvas & Clouds) --- */
        /* 2.1 新增：云纹背景层样式 */
        .cloud-bg-layer {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0; /* 放在最底层，Canvas之下 */
            opacity: 0.6; /* 整体透明度，让背景色透出来 */
            /* 添加缓慢漂移动画，营造流动感 */
            animation: panClouds 240s linear infinite;
            /* 确保鼠标事件穿透 */
            pointer-events: none;
        }

        #warp-canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            width: 100%;
            height: 100%;
            opacity: 0.5;
        }

        /* --- 3. 全景边框层 --- */
        .full-frame {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            z-index: 10;
            pointer-events: none;
            border: 4px solid rgba(255, 215, 0, 0.6);
            box-shadow: 0 0 20px rgba(255, 100, 0, 0.3), inset 0 0 20px rgba(255, 100, 0, 0.3);
        }

        .full-frame::after {
            content: '';
            position: absolute;
            top: 6px;
            left: 6px;
            right: 6px;
            bottom: 6px;
            border: 1px solid rgba(200, 0, 0, 0.6);
        }

        /* 角落装饰 - 中式回纹意向 */
        .corner-deco {
            position: absolute;
            width: 100px;
            height: 100px;
            z-index: 15;
            fill: url(#goldGradient);
            filter: drop-shadow(0 0 5px #ff6600);
        }

        .corner-deco.tl { top: 0; left: 0; transform: rotate(0deg); }
        .corner-deco.tr { top: 0; right: 0; transform: rotate(90deg); }
        .corner-deco.br { bottom: 0; right: 0; transform: rotate(180deg); }
        .corner-deco.bl { bottom: 0; left: 0; transform: rotate(270deg); }

        /* 祥云装饰 (前景大云朵) */
        .cloud-deco {
            position: absolute;
            width: 120px;
            height: 60px;
            z-index: 12;
            fill: url(#goldGradient);
            opacity: 0.8;
            filter: drop-shadow(0 0 8px #ff8800);
        }
        .cloud-deco.c1 { top: -10px; left: 15%; animation: floatCloud 8s ease-in-out infinite; }
        .cloud-deco.c2 { top: -10px; right: 15%; animation: floatCloud 9s ease-in-out infinite reverse; }
        .cloud-deco.c3 { bottom: -20px; left: 50%; transform: translateX(-50%); width: 200px; opacity: 0.6; }

        /* 金币装饰 */
        .coin-deco {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: radial-gradient(circle, #ffd700 0%, #b8860b 100%);
            border: 2px solid #ff8c00;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #8b0000;
            font-weight: bold;
            font-size: 24px;
            box-shadow: 0 0 10px #ffd700;
            z-index: 16;
            font-family: "KaiTi", "STKaiti", serif; /* 楷体 */
        }
        .coin-deco.ct { top: 50px; left: 50%; transform: translateX(-50%); font-size: 32px; width: 60px; height: 60px; }
        .coin-deco.l1 { top: 120px; left: 50px; }
        .coin-deco.r1 { top: 120px; right: 50px; }

        /* --- 4. Logo 层 (增强) --- */
        .logo-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 50;
            width: 240px;
            height: 240px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            animation: breathe 4s ease-in-out infinite;
        }

        .logo-bg-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px dashed rgba(255, 215, 0, 0.3);
            animation: rotate 30s linear infinite;
        }

        .logo-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            /* 更有质感的中国红背景 */
            background: radial-gradient(circle, rgba(180, 0, 0, 0.8) 0%, rgba(50, 0, 0, 0.9) 100%);
            border: 5px solid #ffd700;
            box-shadow: 0 0 50px rgba(255, 69, 0, 0.6), inset 0 0 30px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
        }

        /* 简化的中国结 CSS 效果 */
        .knot-center {
            position: absolute;
            width: 60px;
            height: 60px;
            border: 4px solid #ff0000;
            transform: rotate(45deg);
            border-radius: 10px;
            box-shadow: 0 0 10px #ff0000;
        }

        .logo-text {
            color: #ffd700;
            font-weight: 900;
            font-size: 42px;
            text-shadow: 2px 2px 0px #8b0000, 0 0 20px #ff8c00;
            z-index: 3;
            letter-spacing: 2px;
        }

        .logo-subtitle {
            position: absolute;
            bottom: -40px;
            color: #ffd700;
            font-size: 18px;
            font-weight: bold;
            letter-spacing: 5px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            background: rgba(0,0,0,0.5);
            padding: 5px 15px;
            border-radius: 20px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            white-space: nowrap;
        }

        /* --- 5. 3D 祝福流星层 (字体加大) --- */
        .meteor-stage {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            z-index: 100;
            pointer-events: none;
        }

        .meteor-item {
            position: absolute;
            top: 50%;
            left: 50%;
            /* 容器加宽以容纳大字体 */
            width: 600px; 
            height: 120px;
            margin-left: -300px;
            margin-top: -60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            will-change: transform, opacity;
        }

        .msg-text {
            /* 字体加大到 70px */
            font-size: 70px;
            font-weight: 900; /* 极粗 */
            white-space: nowrap;
            letter-spacing: 4px;
            /* 增强发光，使字在深色背景上更醒目 */
            text-shadow: 
                0 0 10px currentColor, 
                0 0 30px currentColor, 
                0 0 60px currentColor,
                4px 4px 0px rgba(0,0,0,0.5); /* 添加立体阴影 */
            margin-bottom: 10px;
            line-height: 1.2;
            /* 确保文字在Z轴旋转时不会显得太细 */
            transform: translateZ(0); 
        }

        .msg-sender {
            /* 字体加大到 24px */
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(90deg, transparent 0%, rgba(139, 0, 0, 0.8) 20%, rgba(139, 0, 0, 0.8) 80%, transparent 100%);
            padding: 5px 30px;
            border-radius: 25px;
            border: 2px solid rgba(255, 215, 0, 0.8);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
            white-space: nowrap;
            text-shadow: 1px 1px 2px #000;
        }

        /* 动画定义 */
        @keyframes breathe {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes floatCloud {
            0%, 100% { transform: translateY(0); opacity: 0.8; }
            50% { transform: translateY(-10px); opacity: 1; }
        }

        /* 新增：云纹背景漂移动画 */
        @keyframes panClouds {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-200px, -200px); } /* 缓慢向左上移动 */
        }
    </style>
</head>
<body>

<svg width="0" height="0" style="position: absolute; pointer-events: none;">
    <defs>
        <linearGradient id="goldGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
            <stop offset="50%" style="stop-color:#FCE6C9;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#DAA520;stop-opacity:1" />
        </linearGradient>
        
        <path id="cloudPath" d="M10,30 Q5,30 5,25 Q5,10 20,10 Q25,0 40,5 Q50,0 60,5 Q75,0 80,10 Q95,10 95,25 Q95,30 90,30 L10,30 Z" />
        
        <path id="cornerPath" d="M10,90 V50 H50 M10,90 L90,90 M10,90 L10,10" stroke="currentColor" stroke-width="8" fill="none" stroke-linecap="square" />

        <pattern id="cloudBgPattern" x="0" y="0" width="300" height="150" patternUnits="userSpaceOnUse">
            <g fill="none" stroke="url(#goldGradient)" stroke-width="1" opacity="0.15">
                <path d="M0,75 Q30,30 75,75 T150,75 T225,75 T300,75" />
                <path d="M0,120 Q30,80 75,120 T150,120 T225,120 T300,120" transform="translate(100,-20)" />
                <path d="M0,30 Q30,-10 75,30 T150,30 T225,30 T300,30" transform="translate(50,10)" />
                <circle cx="40" cy="50" r="8" opacity="0.5"/>
                <circle cx="180" cy="90" r="12" opacity="0.5"/>
                <circle cx="260" cy="40" r="6" opacity="0.5"/>
            </g>
        </pattern>
    </defs>
</svg>

<div id="app">
    <svg class="cloud-bg-layer" width="100%" height="100%">
        <rect x="-20%" y="-20%" width="140%" height="140%" fill="url(#cloudBgPattern)" />
    </svg>

    <canvas id="warp-canvas" ref="canvasRef"></canvas>

    <div class="full-frame"></div>

    <div class="corner-deco tl">
        <svg viewBox="0 0 100 100" width="100" height="100">
            <path d="M10,90 V50 H50 M10,90 L90,90 M10,90 L10,10" stroke="#ffd700" stroke-width="8" fill="none" stroke-linecap="square" />
            <circle cx="10" cy="10" r="6" fill="#ff0000" />
        </svg>
    </div>
    <div class="corner-deco tr">
        <svg viewBox="0 0 100 100" width="100" height="100">
            <path d="M10,90 V50 H50 M10,90 L90,90 M10,90 L10,10" stroke="#ffd700" stroke-width="8" fill="none" stroke-linecap="square" />
            <circle cx="10" cy="10" r="6" fill="#ff0000" />
        </svg>
    </div>
    <div class="corner-deco br">
        <svg viewBox="0 0 100 100" width="100" height="100">
            <path d="M10,90 V50 H50 M10,90 L90,90 M10,90 L10,10" stroke="#ffd700" stroke-width="8" fill="none" stroke-linecap="square" />
            <circle cx="10" cy="10" r="6" fill="#ff0000" />
        </svg>
    </div>
    <div class="corner-deco bl">
        <svg viewBox="0 0 100 100" width="100" height="100">
            <path d="M10,90 V50 H50 M10,90 L90,90 M10,90 L10,10" stroke="#ffd700" stroke-width="8" fill="none" stroke-linecap="square" />
            <circle cx="10" cy="10" r="6" fill="#ff0000" />
        </svg>
    </div>

    <svg class="cloud-deco c1" viewBox="0 0 100 60">
        <use href="#cloudPath" />
    </svg>
    <svg class="cloud-deco c2" viewBox="0 0 100 60">
        <use href="#cloudPath" />
    </svg>
    <svg class="cloud-deco c3" viewBox="0 0 200 60">
         <path d="M20,60 Q0,60 0,40 Q0,10 40,10 Q60,-20 100,10 Q140,-20 160,10 Q200,10 200,40 Q200,60 180,60 Z" fill="url(#goldGradient)" />
    </svg>

    <div class="coin-deco ct">福</div>
    <div class="coin-deco l1">财</div>
    <div class="coin-deco r1">运</div>

    <div class="logo-container">
        <div class="logo-bg-ring"></div>
        <div class="logo-circle">
            <div class="knot-center"></div>
            <span class="logo-text">2026</span>
        </div>
        <span class="logo-subtitle">新年发射祝福台</span>
    </div>

    <div class="meteor-stage">
        <div 
            v-for="item in activeMeteors" 
            :key="item.id"
            class="meteor-item"
            :style="getStyle(item)"
        >
            <div class="msg-text" :style="{ color: item.color }">
                {{ item.content }}
            </div>
            <div class="msg-sender">
                from {{ item.sender }}
            </div>
        </div>
    </div>
</div>

<script>
    const { createApp, ref, onMounted, onUnmounted } = Vue;

    createApp({
        setup() {
            // --- 配置 ---
            const CONFIG = {
                count: 20,              // 稍微减少数量，因为字体大了，避免拥挤
                spawnRate: 40,          // 发射间隔 (帧数)，越大越慢。40帧约0.6秒一个
                zStart: -5000,          // 起始深度 (极远)，给文字足够的"飞来"时间
                zEnd: 1000,             // 结束深度 (冲出屏幕)
                colors: [
                    '#FFD700',          // 金色
                    '#FF4500',          // 橙红
                    '#FF6347',          // 番茄红
                    '#FF8C00',          // 深橙
                    '#FF69B4',          // 粉红
                    '#FFFF00',          // 黄色
                    '#FFFACD'           // 柠檬绸色
                ]
            };

            // --- 新年祝福语库 (扩充且更霸气) ---
            const newYearGreetings = [
                { txt: "财源广进", from: "财务部" },
                { txt: "金玉满堂", from: "总经理" },
                { txt: "万事如意", from: "董事长" },
                { txt: "龙行龘龘", from: "全员" },
                { txt: "前程似锦", from: "HR" },
                { txt: "福星高照", from: "行政部" },
                { txt: "蒸蒸日上", from: "研发部" },
                { txt: "大吉大利", from: "市场部" },
                { txt: "身体健康", from: "工会" },
                { txt: "恭喜发财", from: "销售部" },
                { txt: "阖家幸福", from: "后勤组" },
                { txt: "心想事成", from: "产品部" },
                { txt: "好运连连", from: "运营部" },
                { txt: "步步高升", from: "管理层" },
                { txt: "年年有余", from: "食堂" },
                { txt: "吉星高照", from: "法务部" },
                { txt: "大展宏图", from: "项目部" },
                { txt: "五福临门", from: "党办" },
                { txt: "笑口常开", from: "设计部" },
                { txt: "平安喜乐", from: "安保部" },
                { txt: "百业兴旺", from: "商务部" },
                { txt: "顺风顺水", from: "物流部" },
                { txt: "花开富贵", from: "妇联" },
                { txt: "喜气洋洋", from: "活动组" },
                { txt: "鸿运当头", from: "财神爷" }
            ];

            // --- 状态 ---
            const activeMeteors = ref([]);
            let frameId = null;
            let frameCount = 0;

            // --- 1. 流星逻辑 ---
            class Meteor {
                constructor(id) {
                    this.id = id;
                    this.reset();
                }

                reset() {
                    const data = newYearGreetings[Math.floor(Math.random() * newYearGreetings.length)];
                    this.content = data.txt;
                    this.sender = data.from;
                    this.color = CONFIG.colors[Math.floor(Math.random() * CONFIG.colors.length)];
                    
                    // 极坐标分布
                    const angle = Math.random() * Math.PI * 2;
                    // 字体变大后，分布半径要更大，否则中间太挤
                    const radius = 300 + Math.random() * 900; 
                    
                    this.x = Math.cos(angle) * radius;
                    this.y = Math.sin(angle) * radius;
                    
                    this.z = CONFIG.zStart;
                    // 速度适中：以前是 15+，现在改为 6-14，更加优雅
                    this.speed = 6 + Math.random() * 8;
                    this.active = false;
                }
            }

            // 初始化对象池
            const initMeteors = () => {
                for(let i = 0; i < CONFIG.count; i++) {
                    activeMeteors.value.push(new Meteor(i));
                }
            };

            // --- 2. 核心动画循环 ---
            const loop = () => {
                frameCount++;

                // A. 生成新流星
                if (frameCount % CONFIG.spawnRate === 0) {
                    const available = activeMeteors.value.find(m => !m.active);
                    if (available) {
                        available.reset();
                        available.active = true;
                    }
                }

                // B. 更新流星位置
                activeMeteors.value.forEach(m => {
                    if (!m.active) return;

                    // 移动
                    m.z += m.speed;
                    // 微弱加速：模拟物理效果，但不要太快
                    if (m.z > -2000) m.speed += 0.2;

                    // 边界检查
                    if (m.z > CONFIG.zEnd) {
                        m.active = false;
                    }
                });

                // C. 绘制背景 Canvas
                drawWarpSpeed();

                frameId = requestAnimationFrame(loop);
            };

            // --- 3. 样式计算 ---
            const getStyle = (m) => {
                if (!m.active) return { display: 'none' };

                let opacity = 1;
                const distToStart = m.z - CONFIG.zStart;
                const distToEnd = CONFIG.zEnd - m.z;

                // 渐入渐出逻辑优化，让它更平滑
                if (distToStart < 1500) opacity = distToStart / 1500;
                if (distToEnd < 800) opacity = distToEnd / 800;

                return {
                    transform: `translate3d(${m.x}px, ${m.y}px, ${m.z}px)`,
                    opacity: opacity
                };
            };

            // --- 4. 背景 Canvas 动画 ---
            const canvasRef = ref(null);
            let ctx = null;
            let stars = [];
            const STAR_COUNT = 300;

            const initCanvas = () => {
                const cvs = canvasRef.value;
                if(!cvs) return;
                cvs.width = window.innerWidth;
                cvs.height = window.innerHeight;
                ctx = cvs.getContext('2d');
                
                stars = [];
                for(let i=0; i<STAR_COUNT; i++) {
                    stars.push({
                        x: Math.random() * cvs.width - cvs.width/2,
                        y: Math.random() * cvs.height - cvs.height/2,
                        z: Math.random() * 2000
                    });
                }
            };

            const drawWarpSpeed = () => {
                if (!ctx || !canvasRef.value) return;
                const w = canvasRef.value.width;
                const h = canvasRef.value.height;
                const cx = w / 2;
                const cy = h / 2;

                // 背景色清除：带一点点透明度造成拖影效果
                ctx.fillStyle = 'rgba(5, 0, 10, 0.3)'; // 背景拖影更暗一点，凸显金色
                ctx.fillRect(0, 0, w, h);
                
                stars.forEach(star => {
                    // 星星移动速度也调慢
                    star.z -= 6;
                    
                    if (star.z <= 0) {
                        star.z = 2000;
                        star.x = Math.random() * w - w/2;
                        star.y = Math.random() * h - h/2;
                    }

                    const k = 128.0 / star.z;
                    const px = star.x * k + cx;
                    const py = star.y * k + cy;

                    if (px >= 0 && px <= w && py >= 0 && py <= h) {
                        const size = (1 - star.z / 2000) * 3;
                        
                        // 星星颜色更偏向金色，配合主题
                        const r = 255;
                        const g = parseInt(200 * (1 - star.z / 2000));
                        const b = parseInt(100 * (1 - star.z / 2000));
                        
                        // 绘制长条形状
                        const oldPx = star.x * (128.0 / (star.z + 10)) + cx;
                        const oldPy = star.y * (128.0 / (star.z + 10)) + cy;
                        
                        ctx.beginPath();
                        ctx.moveTo(oldPx, oldPy);
                        ctx.lineTo(px, py);
                        ctx.strokeStyle = `rgb(${r},${g},${b})`;
                        ctx.lineWidth = size;
                        ctx.stroke();
                    }
                });
            };

            // --- 生命周期 ---
            onMounted(() => {
                initMeteors();
                initCanvas();
                window.addEventListener('resize', initCanvas);
                loop();
            });

            onUnmounted(() => {
                window.removeEventListener('resize', initCanvas);
                if (frameId) cancelAnimationFrame(frameId);
            });

            return {
                activeMeteors,
                getStyle,
                canvasRef
            };
        }
    }).mount('#app');
</script>
</body>
</html>